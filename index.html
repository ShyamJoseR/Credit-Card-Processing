<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Interest Calculator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
            background-color: #ffffff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        .box {
            border: 1px solid #ced4da;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            background-color: #f8f9fa;
        }
        h1, h3 {
            text-align: center;
            color: #007bff;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        table, th, td {
            border: 1px solid #ced4da;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        .form-group label {
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Credit Card Interest Calculator</h1>
    <div class="row">
        <!-- First Box -->
        <div class="col-md-6 box">
            <h3>Parameter Details</h3>
            <div class="form-group">
                <label for="yearBase">Year Base:</label>
                <select class="form-control" id="yearBase" name="yearBase">
                    <option value="Dynamic" selected>Dynamic</option>
                    <option value="Non-Leap Year">Non-Leap Year</option>
                    <option value="Leap Year">Leap Year</option>
                </select>
            </div>
            <div class="form-group">
                <label for="interestStartDebit">Interest Start Debit:</label>
                <select class="form-control" id="interestStartDebit" name="interestStartDebit">
                    <option value="From Transaction Date" selected>From Transaction Date</option>
                    <option value="From Posting Date">From Posting Date</option>
                </select>
            </div>
            <div class="form-group">
                <label for="interestStartCredit">Interest Start Credit:</label>
                <select class="form-control" id="interestStartCredit" name="interestStartCredit">
                    <option value="From Transaction Date" selected>From Transaction Date</option>
                    <option value="From Posting Date">From Posting Date</option>
                </select>
            </div>
            <div class="form-group">
                <label for="interestRate">Interest Rate / Day:</label>
                <input type="text" class="form-control" id="interestRate" name="interestRate" placeholder="0.0000000%">
            </div>
            <div class="form-group">
                <label for="accruedThroughDate">Accrued Through Date:</label>
                <input type="date" class="form-control" id="accruedThroughDate" name="accruedThroughDate">
            </div>
        </div>

        <!-- Second Box -->
        <div class="col-md-6 box">
            <h3>Add Debit Transactions</h3>
            <div class="form-group">
                <label for="debitAmount">Debit Amount:</label>
                <input type="text" class="form-control" id="debitAmount" name="debitAmount" placeholder="$0.00">
            </div>
            <div class="form-group">
                <label id="debitDateLabel" for="debitDate">Transaction Date:</label>
                <input type="date" class="form-control" id="debitDate" name="debitDate">
            </div>
            <button type="button" class="btn btn-primary btn-block" id="addDebitTransaction">Add Debit Transaction</button>
            <table id="debitTable" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Serial Number</th>
                        <th>Amount</th>
                        <th>Date</th>
                        <th>Interest Calculated</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <!-- Third Box -->
        <div class="col-md-6 box">
            <h3>Add Credit Transactions</h3>
            <div class="form-group">
                <label for="creditAmount">Credit Amount:</label>
                <input type="text" class="form-control" id="creditAmount" name="creditAmount" placeholder="$0.00">
            </div>
            <div class="form-group">
                <label id="creditDateLabel" for="creditDate">Transaction Date:</label>
                <input type="date" class="form-control" id="creditDate" name="creditDate">
            </div>
            <button type="button" class="btn btn-primary btn-block" id="addCreditTransaction">Add Credit Transaction</button>
            <table id="creditTable" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Serial Number</th>
                        <th>Amount</th>
                        <th>Date</th>
                        <th>Interest Calculated</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Fourth Box -->
        <div class="col-md-6 box">
            <h3>Results</h3>
            <button type="button" class="btn btn-success btn-block mb-2" id="calculateInterest">Calculate Interest</button>
            <span id="interestResult" class="d-block mb-2">Interest: $0.00</span>
            <button type="button" class="btn btn-success btn-block mb-2" id="calculateMinDue">Calculate Minimum Amount Due</button>
            <span id="minDueResult" class="d-block">Minimum Amount Due: $0.00</span>
        </div>
    </div>
</div>

<script>
    let debitTransactions = [];
    let creditTransactions = [];

    function formatCurrencyInput(value) {
        return `$${parseFloat(value.replace(/[^\d.-]/g, '')).toFixed(2)}`;
    }

    function formatPercentageInput(value) {
        return `${parseFloat(value.replace(/[^\d.-]/g, '')).toFixed(7)}%`;
    }

    function calculateInterest(amount, days, rate) {
        return parseFloat((amount * rate * days).toFixed(2));
    }

    document.getElementById('interestStartDebit').addEventListener('change', function () {
        document.getElementById('debitDateLabel').innerText = this.value === 'From Transaction Date' ? 'Transaction Date:' : 'Posting Date:';
    });

    document.getElementById('interestStartCredit').addEventListener('change', function () {
        document.getElementById('creditDateLabel').innerText = this.value === 'From Transaction Date' ? 'Transaction Date:' : 'Posting Date:';
    });

    document.getElementById('addDebitTransaction').addEventListener('click', function () {
        const amount = formatCurrencyInput(document.getElementById('debitAmount').value);
        const date = document.getElementById('debitDate').value;
        const rate = parseFloat(document.getElementById('interestRate').value.replace(/[^\d.-]/g, '')) / 100;
        const accruedDate = new Date(document.getElementById('accruedThroughDate').value);
        const transactionDate = new Date(date);
        const days = Math.ceil((accruedDate - transactionDate) / (1000 * 60 * 60 * 24));
        const interest = calculateInterest(parseFloat(amount.replace(/[^\d.-]/g, '')), days, rate);

        debitTransactions.push({ amount, date, interest });
        renderTable('debitTable', debitTransactions);
    });

    document.getElementById('addCreditTransaction').addEventListener('click', function () {
        const amount = formatCurrencyInput(document.getElementById('creditAmount').value);
        const date = document.getElementById('creditDate').value;
        const rate = parseFloat(document.getElementById('interestRate').value.replace(/[^\d.-]/g, '')) / 100;
        const accruedDate = new Date(document.getElementById('accruedThroughDate').value);
        const transactionDate = new Date(date);
        const days = Math.ceil((accruedDate - transactionDate) / (1000 * 60 * 60 * 24));
        const interest = calculateInterest(parseFloat(amount.replace(/[^\d.-]/g, '')), days, rate);

        creditTransactions.push({ amount, date, interest });
        renderTable('creditTable', creditTransactions);
    });

    function renderTable(tableId, transactions) {
        const tableBody = document.getElementById(tableId).querySelector('tbody');
        tableBody.innerHTML = '';
        transactions.forEach((transaction, index) => {
            const row = tableBody.insertRow();
            row.insertCell(0).innerText = index + 1;
            row.insertCell(1).innerText = transaction.amount;
            row.insertCell(2).innerText = transaction.date;
            row.insertCell(3).innerText = `$${transaction.interest.toFixed(2)}`;
        });
    }

    document.getElementById('calculateInterest').addEventListener('click', function () {
        const debitInterest = debitTransactions.reduce((sum, t) => sum + t.interest, 0);
        const creditInterest = creditTransactions.reduce((sum, t) => sum + t.interest, 0);
        const totalInterest = debitInterest - creditInterest;
        document.getElementById('interestResult').innerText = `Interest: $${totalInterest.toFixed(2)}`;
    });

    document.getElementById('calculateMinDue').addEventListener('click', function () {
        const interestText = document.getElementById('interestResult').innerText;
        const interest = parseFloat(interestText.replace(/[^0-9.-]+/g, ""));
        const minDue = interest * 10;
        document.getElementById('minDueResult').innerText = `Minimum Amount Due: $${minDue.toFixed(2)}`;
    });

    document.addEventListener('DOMContentLoaded', function () {
    const box1Inputs = document.querySelectorAll('#yearBase, #interestStartDebit, #interestStartCredit, #interestRate, #accruedThroughDate');
    const buttons = document.querySelectorAll('#addDebitTransaction, #addCreditTransaction, #calculateInterest, #calculateMinDue');

    function validateBox1Inputs() {
        for (let input of box1Inputs) {
            if (input.value.trim() === '' || (input.id === 'interestRate' && !/^\d+(\.\d{1,7})?\%?$/.test(input.value))) {
                return false;
            }
        }
        return true;
    }

    function toggleButtons() {
        const allValid = validateBox1Inputs();
        for (let button of buttons) {
            button.disabled = !allValid;
        }
    }

    for (let input of box1Inputs) {
        input.addEventListener('input', toggleButtons);
        input.addEventListener('change', toggleButtons);
    }

    toggleButtons(); // Initial validation check
});

    

</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
